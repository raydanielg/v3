import{t as L,r as d,c as r,a as g,u as f,h as I,w as v,e as J,f as x,b as e,o as l,F as w,i as _,g as p,n as G,T as M,j as A,k as y,l as b,v as D,d as K,m as S}from"./app-DvnvpFhk.js";import{_ as O}from"./DashboardLayout-BqlDV14l.js";import{_ as Q}from"./Toast-N-EvS2M8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"rounded-lg bg-white shadow-sm border border-gray-200 overflow-hidden"},X={class:"overflow-x-auto"},Y={class:"w-full"},Z={class:"divide-y divide-gray-200"},ee={class:"px-6 py-4 text-sm font-medium text-gray-900"},te={class:"px-6 py-4 text-sm text-gray-600"},se={class:"px-6 py-4 text-sm"},le={class:"px-6 py-4 text-sm text-gray-600"},ae={class:"px-6 py-4 text-sm"},re={class:"flex items-center gap-2 justify-end"},oe=["onClick"],ne=["onClick"],ie={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},de={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},ue={class:"px-6 py-4 space-y-4"},ce=["value"],me={class:"flex gap-3 border-t border-gray-200 px-6 py-4"},pe=["disabled"],xe={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ye={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ge={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},be={class:"px-6 py-4 space-y-4"},fe=["value"],ve={class:"flex gap-3 border-t border-gray-200 px-6 py-4"},we=["disabled"],he={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ke={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ce={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Ue={key:0,class:"px-6 py-4 text-sm text-gray-700"},_e={class:"font-semibold"},Me={class:"text-xs text-gray-500 ml-1"},Ae={__name:"Index",props:{users:{type:Array,required:!0},roles:{type:Array,required:!0}},setup(V){const N=V,{users:T,roles:j}=L(N),h=d(!1),k=d(!1),C=d(!1),o=d(null),n=d(!1),E=d(""),F=d("success"),U=d(!1),a=d({name:"",email:"",password:"",role:"admin"}),i=d({name:"",email:"",role:"admin"}),c=(u,t="success")=>{E.value=u,F.value=t,U.value=!0},q=()=>{a.value={name:"",email:"",password:"",role:"admin"},h.value=!0},z=u=>{o.value=u,i.value={name:u.name,email:u.email,role:u.role||"admin"},k.value=!0},B=u=>{o.value=u,C.value=!0},m=()=>{h.value=!1,k.value=!1,C.value=!1,o.value=null},P=()=>{if(!a.value.name||!a.value.email||!a.value.password){c("Please fill in name, email and password.","warning");return}n.value=!0,S.post(route("admin.users.store"),a.value,{preserveScroll:!0,onSuccess:()=>{c("User created successfully.","success"),m()},onError:()=>{c("Failed to create user. Please check the details.","error")},onFinish:()=>{n.value=!1}})},$=()=>{if(o.value){if(!i.value.name||!i.value.email){c("Please fill in name and email.","warning");return}n.value=!0,S.patch(route("admin.users.update",o.value.id),i.value,{preserveScroll:!0,onSuccess:()=>{c("User updated successfully.","success"),m()},onError:()=>{c("Failed to update user. Please check the details.","error")},onFinish:()=>{n.value=!1}})}},R=()=>{o.value&&(n.value=!0,S.delete(route("admin.users.destroy",o.value.id),{preserveScroll:!0,onSuccess:()=>{c("User deleted successfully.","success"),m()},onError:()=>{c("Failed to delete user.","error")},onFinish:()=>{n.value=!1}}))};return(u,t)=>(l(),r(w,null,[g(f(I),{title:"User Management"}),g(O,null,{default:v(()=>[U.value?(l(),J(Q,{key:0,message:E.value,type:F.value,duration:4e3,onClose:t[0]||(t[0]=s=>U.value=!1)},null,8,["message","type"])):x("",!0),e("div",{class:"mb-8 flex items-center justify-between"},[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"User Management"),e("p",{class:"text-gray-600 mt-2 text-sm"},"Manage system users and their roles.")],-1)),e("button",{onClick:q,class:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all"},[...t[8]||(t[8]=[e("span",{class:"material-icons text-base"},"person_add",-1),e("span",null,"Add User",-1)])])]),e("div",W,[e("div",X,[e("table",Y,[t[12]||(t[12]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Created"),e("th",{class:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Z,[(l(!0),r(w,null,_(f(T),s=>(l(),r("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ee,p(s.name),1),e("td",te,p(s.email),1),e("td",se,[e("span",{class:G(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-emerald-100 text-emerald-800":s.role==="admin","bg-blue-100 text-blue-800":s.role==="afisaelimu","bg-purple-100 text-purple-800":s.role==="mkuuwashule","bg-amber-100 text-amber-800":s.role==="enterer","bg-pink-100 text-pink-800":s.role==="msimamiziwakituo"}])},p(s.role||"N/A"),3)]),e("td",le,p(new Date(s.created_at).toLocaleDateString()),1),e("td",ae,[e("div",re,[e("button",{onClick:H=>z(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50/60 hover:bg-blue-100 rounded-full transition-colors"},[...t[10]||(t[10]=[e("span",{class:"material-icons text-sm"},"edit_note",-1),e("span",null,"Edit",-1)])],8,oe),e("button",{onClick:H=>B(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50/60 hover:bg-red-100 rounded-full transition-colors"},[...t[11]||(t[11]=[e("span",{class:"material-icons text-sm"},"delete_outline",-1),e("span",null,"Delete",-1)])],8,ne)])])]))),128))])])])]),g(M,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[h.value?(l(),r("div",ie,[e("div",de,[e("form",{onSubmit:A(P,["prevent"])},[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[14]||(t[14]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Add New User"),e("p",{class:"text-xs text-gray-500 mt-1"},"Create a new user and assign a role.")],-1)),e("button",{type:"button",onClick:m,class:"text-gray-500 hover:text-gray-700"},[...t[13]||(t[13]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",ue,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., John Doe",required:""},null,512),[[b,a.value.name]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.email=s),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., john@example.com",required:""},null,512),[[b,a.value.email]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password",-1)),y(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.password=s),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Min 8 characters",required:""},null,512),[[b,a.value.password]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.role=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},[(l(!0),r(w,null,_(f(j),s=>(l(),r("option",{key:s,value:s},p(s),9,ce))),128))],512),[[D,a.value.role]])])]),e("div",me,[e("button",{type:"button",onClick:m,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:n.value,class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors disabled:opacity-60 disabled:cursor-not-allowed"},[n.value?(l(),r("svg",xe,[...t[19]||(t[19]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):x("",!0),t[20]||(t[20]=e("span",null,"Add User",-1))],8,pe)])],32)])])):x("",!0)]),_:1}),g(M,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[k.value?(l(),r("div",ye,[e("div",ge,[e("form",{onSubmit:A($,["prevent"])},[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[22]||(t[22]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit User"),e("p",{class:"text-xs text-gray-500 mt-1"},"Update basic details and role.")],-1)),e("button",{type:"button",onClick:m,class:"text-gray-500 hover:text-gray-700"},[...t[21]||(t[21]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",be,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),y(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>i.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:""},null,512),[[b,i.value.name]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),y(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>i.value.email=s),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",required:""},null,512),[[b,i.value.email]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),y(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>i.value.role=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},[(l(!0),r(w,null,_(f(j),s=>(l(),r("option",{key:s,value:s},p(s),9,fe))),128))],512),[[D,i.value.role]])])]),e("div",ve,[e("button",{type:"button",onClick:m,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:n.value,class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors disabled:opacity-60 disabled:cursor-not-allowed"},[n.value?(l(),r("svg",he,[...t[26]||(t[26]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):x("",!0),t[27]||(t[27]=e("span",null,"Save Changes",-1))],8,we)])],32)])])):x("",!0)]),_:1}),g(M,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[C.value?(l(),r("div",ke,[e("div",Ce,[t[29]||(t[29]=e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center gap-3"},[e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100"},[e("span",{class:"material-icons text-red-600"},"warning")]),e("div",null,[e("h3",{class:"text-base font-semibold text-gray-900"},"Delete User"),e("p",{class:"mt-1 text-sm text-gray-600"},"Are you sure you want to delete this user? This action cannot be undone.")])],-1)),o.value?(l(),r("div",Ue,[e("p",null,[t[28]||(t[28]=K(" User: ",-1)),e("span",_e,p(o.value.name),1),e("span",Me,"("+p(o.value.email)+")",1)])])):x("",!0),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{type:"button",onClick:m,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{type:"button",onClick:R,class:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors"}," Delete ")])])])):x("",!0)]),_:1})]),_:1})],64))}};export{Ae as default};
