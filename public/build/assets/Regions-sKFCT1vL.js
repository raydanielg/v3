import{r as a,c as i,a as g,u as X,h as O,w as f,e as H,f as u,b as e,o as n,d as y,g as p,F as T,i as G,T as w,j as J,k as x,l as b,m as E}from"./app-DvnvpFhk.js";import{_ as K}from"./DashboardLayout-BqlDV14l.js";import{_ as Q}from"./Toast-N-EvS2M8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={key:1,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between"},Y={class:"flex items-center gap-3"},Z={class:"text-sm font-medium text-blue-900"},ee={class:"rounded-lg bg-white shadow-sm border border-gray-200 overflow-hidden"},te={class:"overflow-x-auto"},se={class:"w-full"},le={class:"bg-gray-50 border-b border-gray-200"},oe={class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},ae=["checked"],re={class:"divide-y divide-gray-200"},ne={class:"px-6 py-4 text-sm"},ie=["checked","onChange"],de={class:"px-6 py-4 text-sm font-medium text-gray-900"},ue={class:"px-6 py-4 text-sm text-gray-600"},ce={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},pe={class:"px-6 py-4 text-sm"},me={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800"},ge={class:"px-6 py-4 text-sm"},xe={class:"flex items-center gap-2 justify-end"},be=["onClick"],fe=["onClick"],ye={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ve={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},we={class:"px-6 py-4 space-y-4"},he={class:"flex gap-3 border-t border-gray-200 px-6 py-4"},ke=["disabled"],Ce={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Re={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Me={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},De={key:0,class:"px-6 py-4 text-sm text-gray-700"},_e={class:"font-semibold"},Se={class:"text-xs text-gray-500 ml-1"},je={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ae={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Ve={class:"px-6 py-4 space-y-4"},Te={class:"block"},Ee={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-emerald-500 hover:bg-emerald-50 transition-colors"},Ne={key:0,class:"text-sm text-emerald-600 mt-2"},Ue={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Be={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},$e={class:"px-6 py-4 space-y-4"},qe={__name:"Regions",props:{regions:{type:Array,required:!0}},setup(h){const k=a(!1),C=a(!1),R=a(!1),S=a(null),r=a([]),M=a(!1),c=a(null),v=a(!1),j=a(""),A=a("success"),D=a(!1),l=a({name:"",code:"",description:""}),m=a(null),N=()=>{l.value={name:"",code:"",description:""},k.value=!0},U=o=>{S.value=o,l.value={name:o.name||"",code:o.code||"",description:o.description||""},C.value=!0},B=()=>{m.value=null,R.value=!0},$=o=>{c.value=o,M.value=!0},d=()=>{k.value=!1,C.value=!1,R.value=!1,M.value=!1,S.value=null,c.value=null},F=o=>{o.target.checked?r.value=regions.map(t=>t.id):r.value=[]},I=o=>{const t=r.value.indexOf(o);t>-1?r.value.splice(t,1):r.value.push(o)},z=()=>{if(r.value.length===0){alert("Please select regions to delete");return}confirm(`Are you sure you want to delete ${r.value.length} region(s)?`)&&console.log("Bulk delete:",r.value)},P=()=>{if(!m.value){alert("Please select a file");return}console.log("Import file:",m.value),d()},q=()=>{c.value&&E.delete(route("admin.regions.delete",c.value.id),{onFinish:()=>{d()}})},_=(o,t="success")=>{j.value=o,A.value=t,D.value=!0},L=()=>{if(!l.value.name||!l.value.code){_("Please fill in region name and code.","warning");return}v.value=!0,E.post(route("admin.regions.store"),l.value,{preserveScroll:!0,onSuccess:()=>{_("Region added successfully.","success"),d()},onError:()=>{_("Failed to add region. Please check the details.","error")},onFinish:()=>{v.value=!1}})};return(o,t)=>(n(),i(T,null,[g(X(O),{title:"Regions Management"}),g(K,null,{default:f(()=>[D.value?(n(),H(Q,{key:0,message:j.value,type:A.value,duration:4e3,onClose:t[0]||(t[0]=s=>D.value=!1)},null,8,["message","type"])):u("",!0),e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Regions Management"),e("p",{class:"text-gray-600 mt-2"},"Manage all regions in the system")],-1)),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:B,class:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all"},[...t[8]||(t[8]=[e("span",{class:"material-icons"},"upload",-1),y(" Import ",-1)])]),e("button",{onClick:N,class:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all"},[...t[9]||(t[9]=[e("span",{class:"material-icons"},"add",-1),y(" Add Region ",-1)])])])])]),r.value.length>0?(n(),i("div",W,[e("div",Y,[t[11]||(t[11]=e("span",{class:"material-icons text-blue-600"},"info",-1)),e("span",Z,p(r.value.length)+" region(s) selected",1)]),e("button",{onClick:z,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-all"},[...t[12]||(t[12]=[e("span",{class:"material-icons text-sm"},"delete",-1),y(" Delete Selected ",-1)])])])):u("",!0),e("div",ee,[e("div",te,[e("table",se,[e("thead",le,[e("tr",null,[e("th",oe,[e("input",{type:"checkbox",onChange:F,checked:r.value.length===h.regions.length&&h.regions.length>0,class:"rounded border-gray-300"},null,40,ae)]),t[13]||(t[13]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Region Name",-1)),t[14]||(t[14]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Code",-1)),t[15]||(t[15]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Districts",-1)),t[16]||(t[16]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",re,[(n(!0),i(T,null,G(h.regions,s=>(n(),i("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ne,[e("input",{type:"checkbox",checked:r.value.includes(s.id),onChange:V=>I(s.id),class:"rounded border-gray-300"},null,40,ie)]),e("td",de,p(s.name),1),e("td",ue,[e("span",ce,p(s.code),1)]),e("td",pe,[e("span",me,p(s.districts?.length||0)+" districts ",1)]),e("td",ge,[e("div",xe,[e("button",{onClick:V=>U(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50/60 hover:bg-blue-100 rounded-full transition-colors",title:"Edit region"},[...t[17]||(t[17]=[e("span",{class:"material-icons text-sm"},"edit_note",-1),e("span",null,"Edit",-1)])],8,be),e("button",{onClick:V=>$(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50/60 hover:bg-red-100 rounded-full transition-colors",title:"Delete region"},[...t[18]||(t[18]=[e("span",{class:"material-icons text-sm"},"delete_outline",-1),e("span",null,"Delete",-1)])],8,fe)])])]))),128))])])])]),g(w,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:f(()=>[k.value?(n(),i("div",ye,[e("div",ve,[e("form",{onSubmit:J(L,["prevent"])},[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[20]||(t[20]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Add New Region"),e("p",{class:"text-xs text-gray-500 mt-1"},"Create a new region with a code and optional description.")],-1)),e("button",{type:"button",onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[19]||(t[19]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",we,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Region Name",-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., Dar es Salaam",required:""},null,512),[[b,l.value.name]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Code",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.code=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent uppercase tracking-wider",placeholder:"e.g., DSM",required:""},null,512),[[b,l.value.code]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.description=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",rows:"3",placeholder:"Optional: short description for this region"},null,512),[[b,l.value.description]])])]),e("div",he,[e("button",{type:"button",onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:v.value,class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors disabled:opacity-60 disabled:cursor-not-allowed"},[v.value?(n(),i("svg",Ce,[...t[24]||(t[24]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):u("",!0),t[25]||(t[25]=e("span",null,"Add Region",-1))],8,ke)])],32)])])):u("",!0)]),_:1}),g(w,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:f(()=>[M.value?(n(),i("div",Re,[e("div",Me,[t[28]||(t[28]=e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center gap-3"},[e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100"},[e("span",{class:"material-icons text-red-600"},"warning")]),e("div",null,[e("h3",{class:"text-base font-semibold text-gray-900"},"Delete Region"),e("p",{class:"mt-1 text-sm text-gray-600"},"Are you sure you want to delete this region? This action cannot be undone.")])],-1)),c.value?(n(),i("div",De,[e("p",null,[t[26]||(t[26]=y(" Region: ",-1)),e("span",_e,p(c.value.name),1),e("span",Se,"("+p(c.value.code)+")",1)]),t[27]||(t[27]=e("p",{class:"mt-1 text-xs text-gray-500"},"All related districts will also be removed.",-1))])):u("",!0),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:q,class:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors"}," Delete ")])])])):u("",!0)]),_:1}),g(w,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:f(()=>[R.value?(n(),i("div",je,[e("div",Ae,[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[30]||(t[30]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Import Regions",-1)),e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[29]||(t[29]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Ve,[e("div",null,[t[35]||(t[35]=e("p",{class:"text-sm text-gray-600 mb-3"},"Upload a CSV or Excel file with region data",-1)),e("label",Te,[e("div",Ee,[t[31]||(t[31]=e("span",{class:"material-icons text-4xl text-gray-400 block mb-2"},"cloud_upload",-1)),t[32]||(t[32]=e("p",{class:"text-sm font-medium text-gray-700"},"Click to upload or drag and drop",-1)),t[33]||(t[33]=e("p",{class:"text-xs text-gray-500"},"CSV, XLS, XLSX (max 5MB)",-1)),e("input",{type:"file",onChange:t[4]||(t[4]=s=>m.value=s.target.files?.[0]),accept:".csv,.xls,.xlsx",class:"hidden"},null,32)])]),m.value?(n(),i("p",Ne,[t[34]||(t[34]=e("span",{class:"material-icons text-sm align-middle"},"check_circle",-1)),y(" "+p(m.value.name),1)])):u("",!0)])]),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:P,class:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"}," Import ")])])])):u("",!0)]),_:1}),g(w,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:f(()=>[C.value?(n(),i("div",Ue,[e("div",Be,[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit Region",-1)),e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[36]||(t[36]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",$e,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Region Name",-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,l.value.name]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Code",-1)),x(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.code=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[b,l.value.code]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.description=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",rows:"3"},null,512),[[b,l.value.description]])])]),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),t[41]||(t[41]=e("button",{class:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors"}," Update Region ",-1))])])])):u("",!0)]),_:1})]),_:1})],64))}};export{qe as default};
