import{_ as v}from"./DashboardLayout-BMG-KyuB.js";import{_ as w}from"./Toast-D1CVE4n_.js";import{f as _,g as r,c as a,a as g,u,h as B,w as C,i as N,e as S,b as e,o as s,t as n,d as i,F as y,r as D,m as F}from"./app-DlV9HYEa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"mb-8 flex items-center justify-between"},A=["disabled"],V={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},z={key:1,class:"material-icons text-base"},L={class:"grid gap-6 lg:grid-cols-3"},M={class:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm lg:col-span-2"},R={key:0,class:"text-sm text-gray-500"},$={key:1,class:"overflow-x-auto"},j={class:"w-full text-sm"},E={class:"divide-y divide-gray-200"},q={class:"px-4 py-2"},H={class:"px-4 py-2"},K={class:"text-xs text-gray-700"},Q={class:"px-4 py-2 text-xs text-gray-600"},Y={class:"px-4 py-2 text-right"},G=["href"],U={__name:"Backup",props:{backups:{type:Array,required:!0}},setup(f){const h=f,{backups:p}=_(h),o=r(!1),x=r(""),m=r("success"),c=r(!1),b=(d,t="success")=>{x.value=d,m.value=t,c.value=!0},k=()=>{o.value||(o.value=!0,F.post(route("admin.settings.backup.store"),{},{preserveScroll:!0,onSuccess:()=>{b("Backup created successfully.","success")},onError:()=>{b("Failed to create backup.","error")},onFinish:()=>{o.value=!1}}))};return(d,t)=>(s(),a(y,null,[g(u(B),{title:"Backup & Restore"}),g(v,null,{default:C(()=>[c.value?(s(),N(w,{key:0,message:x.value,type:m.value,duration:4e3,onClose:t[0]||(t[0]=l=>c.value=!1)},null,8,["message","type"])):S("",!0),e("div",T,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Backup & Restore"),e("p",{class:"text-gray-600 mt-2 text-sm"},"Create and download backups of the system database.")],-1)),e("button",{type:"button",onClick:k,disabled:o.value,class:"inline-flex items-center gap-2 px-4 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-lg shadow-sm transition-colors disabled:opacity-60 disabled:cursor-not-allowed"},[o.value?(s(),a("svg",V,[...t[1]||(t[1]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(s(),a("span",z,"backup")),e("span",null,n(o.value?"Creating Backup...":"Create Backup"),1)],8,A)]),e("div",L,[t[6]||(t[6]=e("section",{class:"rounded-xl border border-blue-200 bg-blue-50 p-6 shadow-sm lg:col-span-1"},[e("h2",{class:"text-base font-semibold text-blue-900 mb-2 flex items-center gap-2"},[e("span",{class:"material-icons text-blue-500 text-base"},"info"),i(" Backup Notes ")]),e("p",{class:"text-xs text-blue-900 mb-2"}," This tool creates a copy of your SQLite database file and stores it in the server's storage. You can then download the backup file. "),e("ul",{class:"text-xs text-blue-900 list-disc list-inside space-y-1"},[e("li",null,[i("Backups are stored under "),e("code",null,"storage/app/backups"),i(".")]),e("li",null,"Download backups regularly to a safe location."),e("li",null,"Database restore is sensitive and should be done manually by a system administrator.")])],-1)),e("section",M,[t[5]||(t[5]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-base font-semibold text-gray-900 flex items-center gap-2"},[e("span",{class:"material-icons text-gray-500 text-base"},"storage"),i(" Available Backups ")])],-1)),u(p).length===0?(s(),a("div",R,' No backups have been created yet. Click "Create Backup" to generate one. ')):(s(),a("div",$,[e("table",j,[t[4]||(t[4]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Name"),e("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Size"),e("th",{class:"px-4 py-2 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Created At"),e("th",{class:"px-4 py-2 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",E,[(s(!0),a(y,null,D(u(p),l=>(s(),a("tr",{key:l.id,class:"hover:bg-gray-50 transition-colors"},[e("td",q,n(l.name),1),e("td",H,[e("span",K,n((l.size/1024).toFixed(1))+" KB",1)]),e("td",Q,n(new Date(l.created_at).toLocaleString()),1),e("td",Y,[e("a",{href:d.route("admin.settings.backup.download",l.id),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-full transition-colors"},[...t[3]||(t[3]=[e("span",{class:"material-icons text-sm"},"download",-1),e("span",null,"Download",-1)])],8,G)])]))),128))])])]))])])]),_:1})],64))}};export{U as default};
