import{t as Q,r as n,c as o,a as g,u as x,h as W,w as y,e as Y,f as c,b as e,o as l,d as b,g as u,F as w,i as A,T as h,j as Z,k,v as I,l as $,m as F}from"./app-DvnvpFhk.js";import{_ as ee}from"./DashboardLayout-BqlDV14l.js";import{_ as te}from"./Toast-N-EvS2M8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={key:1,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between"},le={class:"flex items-center gap-3"},oe={class:"text-sm font-medium text-blue-900"},ae={class:"rounded-lg bg-white shadow-sm border border-gray-200 overflow-hidden"},re={class:"overflow-x-auto"},ne={class:"w-full"},ie={class:"bg-gray-50 border-b border-gray-200"},de={class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},ue=["checked"],ce={class:"divide-y divide-gray-200"},pe={class:"px-6 py-4 text-sm"},me=["checked","onChange"],ge={class:"px-6 py-4 text-sm font-medium text-gray-900"},xe={class:"px-6 py-4 text-sm text-gray-600"},ye={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},be={class:"px-6 py-4 text-sm"},fe={class:"flex items-center gap-2 justify-end"},ve=["onClick"],we=["onClick"],he={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ke={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},_e={class:"px-6 py-4 space-y-4"},De={class:"block"},Ce={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-emerald-500 hover:bg-emerald-50 transition-colors"},Me={key:0,class:"text-sm text-emerald-600 mt-2"},Se={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},je={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Ae={key:0,class:"px-6 py-4 text-sm text-gray-700"},Ve={class:"font-semibold"},Te={class:"text-xs text-gray-500 ml-1"},Ee={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ne={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Be={class:"px-6 py-4 space-y-4"},Ie=["value"],$e={class:"flex gap-3 border-t border-gray-200 px-6 py-4"},Fe=["disabled"],Ue={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ze={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Pe={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Re={class:"px-6 py-4 space-y-4"},qe=["value"],Ge={__name:"Districts",props:{districts:{type:Array,required:!0},regions:{type:Array,required:!0}},setup(U){const V=U,{districts:f,regions:z}=Q(V),_=n(!1),D=n(!1),C=n(!1),T=n(null),i=n([]),M=n(!1),p=n(null),v=n(!1),E=n(""),N=n("success"),S=n(!1),a=n({region_id:"",name:""}),m=n(null),P=()=>{a.value={region_id:"",name:""},_.value=!0},R=r=>{T.value=r,a.value={region_id:r.region_id,name:r.name},D.value=!0},q=()=>{m.value=null,C.value=!0},L=r=>{p.value=r,M.value=!0},d=()=>{_.value=!1,D.value=!1,C.value=!1,M.value=!1,T.value=null,p.value=null},X=r=>{r.target.checked?i.value=f.map(t=>t.id):i.value=[]},H=r=>{const t=i.value.indexOf(r);t>-1?i.value.splice(t,1):i.value.push(r)},O=()=>{if(i.value.length===0){alert("Please select districts to delete");return}confirm(`Are you sure you want to delete ${i.value.length} district(s)?`)&&console.log("Bulk delete:",i.value)},G=()=>{if(!m.value){alert("Please select a file");return}console.log("Import file:",m.value),d()},J=()=>{p.value&&F.delete(route("admin.districts.delete",p.value.id),{onFinish:()=>{d()}})},j=(r,t="success")=>{E.value=r,N.value=t,S.value=!0},K=()=>{if(!a.value.region_id||!a.value.name){j("Please select region and enter district name.","warning");return}v.value=!0,F.post(route("admin.districts.store"),{region_id:a.value.region_id,name:a.value.name},{preserveScroll:!0,onSuccess:()=>{j("District added successfully.","success"),d()},onError:()=>{j("Failed to add district. Please check the details.","error")},onFinish:()=>{v.value=!1}})};return(r,t)=>(l(),o(w,null,[g(x(W),{title:"Districts Management"}),g(ee,null,{default:y(()=>[S.value?(l(),Y(te,{key:0,message:E.value,type:N.value,duration:4e3,onClose:t[0]||(t[0]=s=>S.value=!1)},null,8,["message","type"])):c("",!0),e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Districts Management"),e("p",{class:"text-gray-600 mt-2"},"Manage all districts in the system")],-1)),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:q,class:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all"},[...t[6]||(t[6]=[e("span",{class:"material-icons"},"upload",-1),b(" Import ",-1)])]),e("button",{onClick:P,class:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all"},[...t[7]||(t[7]=[e("span",{class:"material-icons"},"add",-1),b(" Add District ",-1)])])])])]),i.value.length>0?(l(),o("div",se,[e("div",le,[t[9]||(t[9]=e("span",{class:"material-icons text-blue-600"},"info",-1)),e("span",oe,u(i.value.length)+" district(s) selected",1)]),e("button",{onClick:O,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-all"},[...t[10]||(t[10]=[e("span",{class:"material-icons text-sm"},"delete",-1),b(" Delete Selected ",-1)])])])):c("",!0),e("div",ae,[e("div",re,[e("table",ne,[e("thead",ie,[e("tr",null,[e("th",de,[e("input",{type:"checkbox",onChange:X,checked:i.value.length===x(f).length&&x(f).length>0,class:"rounded border-gray-300"},null,40,ue)]),t[11]||(t[11]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"District Name",-1)),t[12]||(t[12]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Region",-1)),t[13]||(t[13]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",ce,[(l(!0),o(w,null,A(x(f),s=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",pe,[e("input",{type:"checkbox",checked:i.value.includes(s.id),onChange:B=>H(s.id),class:"rounded border-gray-300"},null,40,me)]),e("td",ge,u(s.name),1),e("td",xe,[e("span",ye,u(s.region?.name),1)]),e("td",be,[e("div",fe,[e("button",{onClick:B=>R(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50/60 hover:bg-blue-100 rounded-full transition-colors",title:"Edit district"},[...t[14]||(t[14]=[e("span",{class:"material-icons text-sm"},"edit_note",-1),e("span",null,"Edit",-1)])],8,ve),e("button",{onClick:B=>L(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 bg-red-50/60 hover:bg-red-100 rounded-full transition-colors",title:"Delete district"},[...t[15]||(t[15]=[e("span",{class:"material-icons text-sm"},"delete_outline",-1),e("span",null,"Delete",-1)])],8,we)])])]))),128))])])])]),g(h,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[C.value?(l(),o("div",he,[e("div",ke,[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Import Districts",-1)),e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[16]||(t[16]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",_e,[e("div",null,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600 mb-3"},"Upload a CSV or Excel file with district data",-1)),e("label",De,[e("div",Ce,[t[18]||(t[18]=e("span",{class:"material-icons text-4xl text-gray-400 block mb-2"},"cloud_upload",-1)),t[19]||(t[19]=e("p",{class:"text-sm font-medium text-gray-700"},"Click to upload or drag and drop",-1)),t[20]||(t[20]=e("p",{class:"text-xs text-gray-500"},"CSV, XLS, XLSX (max 5MB)",-1)),e("input",{type:"file",onChange:t[1]||(t[1]=s=>m.value=s.target.files?.[0]),accept:".csv,.xls,.xlsx",class:"hidden"},null,32)])]),m.value?(l(),o("p",Me,[t[21]||(t[21]=e("span",{class:"material-icons text-sm align-middle"},"check_circle",-1)),b(" "+u(m.value.name),1)])):c("",!0)])]),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:G,class:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"}," Import ")])])])):c("",!0)]),_:1}),g(h,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[M.value?(l(),o("div",Se,[e("div",je,[t[25]||(t[25]=e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center gap-3"},[e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100"},[e("span",{class:"material-icons text-red-600"},"warning")]),e("div",null,[e("h3",{class:"text-base font-semibold text-gray-900"},"Delete District"),e("p",{class:"mt-1 text-sm text-gray-600"},"Are you sure you want to delete this district? This action cannot be undone.")])],-1)),p.value?(l(),o("div",Ae,[e("p",null,[t[23]||(t[23]=b(" District: ",-1)),e("span",Ve,u(p.value.name),1),e("span",Te,"("+u(p.value.code)+")",1)]),t[24]||(t[24]=e("p",{class:"mt-1 text-xs text-gray-500"},"Any related data attached to this district may also be affected.",-1))])):c("",!0),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:J,class:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors"}," Delete ")])])])):c("",!0)]),_:1}),g(h,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[_.value?(l(),o("div",Ee,[e("div",Ne,[e("form",{onSubmit:Z(K,["prevent"])},[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[27]||(t[27]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Add New District"),e("p",{class:"text-xs text-gray-500 mt-1"},"Select a region and enter district name.")],-1)),e("button",{type:"button",onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[26]||(t[26]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Be,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Region",-1)),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.region_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},[t[28]||(t[28]=e("option",{value:""},"Select a region...",-1)),(l(!0),o(w,null,A(V.regions,s=>(l(),o("option",{key:s.id,value:s.id},u(s.name)+" ("+u(s.code)+") ",9,Ie))),128))],512),[[I,a.value.region_id]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"District Name",-1)),k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., Ilala",required:""},null,512),[[$,a.value.name]])])]),e("div",$e,[e("button",{type:"button",onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:v.value,class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors disabled:opacity-60 disabled:cursor-not-allowed"},[v.value?(l(),o("svg",Ue,[...t[31]||(t[31]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):c("",!0),t[32]||(t[32]=e("span",null,"Add District",-1))],8,Fe)])],32)])])):c("",!0)]),_:1}),g(h,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[D.value?(l(),o("div",ze,[e("div",Pe,[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[34]||(t[34]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit District",-1)),e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[33]||(t[33]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Re,[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Region",-1)),k(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.region_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},[t[35]||(t[35]=e("option",{value:""},"Select a region...",-1)),(l(!0),o(w,null,A(x(z),s=>(l(),o("option",{key:s.id,value:s.id},u(s.name)+" ("+u(s.code)+") ",9,qe))),128))],512),[[I,a.value.region_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"District Name",-1)),k(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[$,a.value.name]])])]),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),t[38]||(t[38]=e("button",{class:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors"}," Update District ",-1))])])])):c("",!0)]),_:1})]),_:1})],64))}};export{Ge as default};
