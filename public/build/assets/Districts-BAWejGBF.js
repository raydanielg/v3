import{t as K,r,c as n,a as x,u as w,h as Q,w as y,e as W,f as u,b as e,o,d as m,g as c,F as j,i as E,T as k,j as Y,k as b,v as I,l as h,m as $}from"./app-D6fCMOw5.js";import{_ as Z}from"./DashboardLayout-FlZzJsz9.js";import{_ as ee}from"./Toast-DcHMc7tc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const te={key:1,class:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-center justify-between"},se={class:"flex items-center gap-3"},le={class:"text-sm font-medium text-blue-900"},oe={class:"rounded-lg bg-white shadow-sm border border-gray-200 overflow-hidden"},ae={class:"overflow-x-auto"},re={class:"w-full"},ne={class:"bg-gray-50 border-b border-gray-200"},ie={class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},de=["checked"],ue={class:"divide-y divide-gray-200"},ce={class:"px-6 py-4 text-sm"},pe=["checked","onChange"],me={class:"px-6 py-4 text-sm font-medium text-gray-900"},ge={class:"px-6 py-4 text-sm text-gray-600"},xe={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},be={class:"px-6 py-4 text-sm"},ye={class:"flex items-center gap-2"},fe=["onClick"],ve=["onClick"],we={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ke={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},he={class:"px-6 py-4 space-y-4"},Ce={class:"block"},De={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-emerald-500 hover:bg-emerald-50 transition-colors"},_e={key:0,class:"text-sm text-emerald-600 mt-2"},Me={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Se={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Ae={key:0,class:"px-6 py-4 text-sm text-gray-700"},je={class:"font-semibold"},Ve={class:"text-xs text-gray-500 ml-1"},Te={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},Ne={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Ue={class:"px-6 py-4 space-y-4"},Be=["value"],Ee={class:"flex gap-3 border-t border-gray-200 px-6 py-4"},Ie=["disabled"],$e={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Fe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ze={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Pe={class:"px-6 py-4 space-y-4"},Oe={__name:"Districts",props:{districts:{type:Array,required:!0},regions:{type:Array,required:!0}},setup(F){const V=F,{districts:f,regions:Re}=K(V),C=r(!1),D=r(!1),_=r(!1),T=r(null),i=r([]),M=r(!1),p=r(null),v=r(!1),N=r(""),U=r("success"),S=r(!1),l=r({region_id:"",name:""}),g=r(null),z=()=>{l.value={region_id:"",name:""},C.value=!0},P=a=>{T.value=a,l.value={region_id:a.region_id,name:a.name},D.value=!0},R=()=>{g.value=null,_.value=!0},q=a=>{p.value=a,M.value=!0},d=()=>{C.value=!1,D.value=!1,_.value=!1,M.value=!1,T.value=null,p.value=null},L=a=>{a.target.checked?i.value=f.map(t=>t.id):i.value=[]},X=a=>{const t=i.value.indexOf(a);t>-1?i.value.splice(t,1):i.value.push(a)},H=()=>{if(i.value.length===0){alert("Please select districts to delete");return}confirm(`Are you sure you want to delete ${i.value.length} district(s)?`)&&console.log("Bulk delete:",i.value)},O=()=>{if(!g.value){alert("Please select a file");return}console.log("Import file:",g.value),d()},G=()=>{p.value&&$.delete(route("admin.districts.delete",p.value.id),{onFinish:()=>{d()}})},A=(a,t="success")=>{N.value=a,U.value=t,S.value=!0},J=()=>{if(!l.value.region_id||!l.value.name){A("Please select region and enter district name.","warning");return}v.value=!0,$.post(route("admin.districts.store"),{region_id:l.value.region_id,name:l.value.name},{preserveScroll:!0,onSuccess:()=>{A("District added successfully.","success"),d()},onError:()=>{A("Failed to add district. Please check the details.","error")},onFinish:()=>{v.value=!1}})};return(a,t)=>(o(),n(j,null,[x(w(Q),{title:"Districts Management"}),x(Z,null,{default:y(()=>[S.value?(o(),W(ee,{key:0,message:N.value,type:U.value,duration:4e3,onClose:t[0]||(t[0]=s=>S.value=!1)},null,8,["message","type"])):u("",!0),e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Districts Management"),e("p",{class:"text-gray-600 mt-2"},"Manage all districts in the system")],-1)),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:R,class:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all"},[...t[8]||(t[8]=[e("span",{class:"material-icons"},"upload",-1),m(" Import ",-1)])]),e("button",{onClick:z,class:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all"},[...t[9]||(t[9]=[e("span",{class:"material-icons"},"add",-1),m(" Add District ",-1)])])])])]),i.value.length>0?(o(),n("div",te,[e("div",se,[t[11]||(t[11]=e("span",{class:"material-icons text-blue-600"},"info",-1)),e("span",le,c(i.value.length)+" district(s) selected",1)]),e("button",{onClick:H,class:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-all"},[...t[12]||(t[12]=[e("span",{class:"material-icons text-sm"},"delete",-1),m(" Delete Selected ",-1)])])])):u("",!0),e("div",oe,[e("div",ae,[e("table",re,[e("thead",ne,[e("tr",null,[e("th",ie,[e("input",{type:"checkbox",onChange:L,checked:i.value.length===w(f).length&&w(f).length>0,class:"rounded border-gray-300"},null,40,de)]),t[13]||(t[13]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"District Name",-1)),t[14]||(t[14]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Region",-1)),t[15]||(t[15]=e("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider"},"Actions",-1))])]),e("tbody",ue,[(o(!0),n(j,null,E(w(f),s=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ce,[e("input",{type:"checkbox",checked:i.value.includes(s.id),onChange:B=>X(s.id),class:"rounded border-gray-300"},null,40,pe)]),e("td",me,c(s.name),1),e("td",ge,[e("span",xe,c(s.region?.name),1)]),e("td",be,[e("div",ye,[e("button",{onClick:B=>P(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 rounded transition-colors"},[...t[16]||(t[16]=[e("span",{class:"material-icons text-sm"},"edit",-1),m(" Edit ",-1)])],8,fe),e("button",{onClick:B=>q(s),class:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 hover:bg-red-50 rounded transition-colors"},[...t[17]||(t[17]=[e("span",{class:"material-icons text-sm"},"delete",-1),m(" Delete ",-1)])],8,ve)])])]))),128))])])])]),x(k,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[_.value?(o(),n("div",we,[e("div",ke,[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Import Districts",-1)),e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[18]||(t[18]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",he,[e("div",null,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600 mb-3"},"Upload a CSV or Excel file with district data",-1)),e("label",Ce,[e("div",De,[t[20]||(t[20]=e("span",{class:"material-icons text-4xl text-gray-400 block mb-2"},"cloud_upload",-1)),t[21]||(t[21]=e("p",{class:"text-sm font-medium text-gray-700"},"Click to upload or drag and drop",-1)),t[22]||(t[22]=e("p",{class:"text-xs text-gray-500"},"CSV, XLS, XLSX (max 5MB)",-1)),e("input",{type:"file",onChange:t[1]||(t[1]=s=>g.value=s.target.files?.[0]),accept:".csv,.xls,.xlsx",class:"hidden"},null,32)])]),g.value?(o(),n("p",_e,[t[23]||(t[23]=e("span",{class:"material-icons text-sm align-middle"},"check_circle",-1)),m(" "+c(g.value.name),1)])):u("",!0)])]),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:O,class:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"}," Import ")])])])):u("",!0)]),_:1}),x(k,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[M.value?(o(),n("div",Me,[e("div",Se,[t[27]||(t[27]=e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center gap-3"},[e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100"},[e("span",{class:"material-icons text-red-600"},"warning")]),e("div",null,[e("h3",{class:"text-base font-semibold text-gray-900"},"Delete District"),e("p",{class:"mt-1 text-sm text-gray-600"},"Are you sure you want to delete this district? This action cannot be undone.")])],-1)),p.value?(o(),n("div",Ae,[e("p",null,[t[25]||(t[25]=m(" District: ",-1)),e("span",je,c(p.value.name),1),e("span",Ve,"("+c(p.value.code)+")",1)]),t[26]||(t[26]=e("p",{class:"mt-1 text-xs text-gray-500"},"Any related data attached to this district may also be affected.",-1))])):u("",!0),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{onClick:G,class:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors"}," Delete ")])])])):u("",!0)]),_:1}),x(k,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[C.value?(o(),n("div",Te,[e("div",Ne,[e("form",{onSubmit:Y(J,["prevent"])},[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[29]||(t[29]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Add New District"),e("p",{class:"text-xs text-gray-500 mt-1"},"Select a region and enter district name.")],-1)),e("button",{type:"button",onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[28]||(t[28]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Ue,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Region",-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.region_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},[t[30]||(t[30]=e("option",{value:""},"Select a region...",-1)),(o(!0),n(j,null,E(V.regions,s=>(o(),n("option",{key:s.id,value:s.id},c(s.name)+" ("+c(s.code)+") ",9,Be))),128))],512),[[I,l.value.region_id]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"District Name",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., Ilala",required:""},null,512),[[h,l.value.name]])])]),e("div",Ee,[e("button",{type:"button",onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:v.value,class:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors disabled:opacity-60 disabled:cursor-not-allowed"},[v.value?(o(),n("svg",$e,[...t[33]||(t[33]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):u("",!0),t[34]||(t[34]=e("span",null,"Add District",-1))],8,Ie)])],32)])])):u("",!0)]),_:1}),x(k,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:y(()=>[D.value?(o(),n("div",Fe,[e("div",ze,[e("div",{class:"flex items-center justify-between border-b border-gray-200 px-6 py-4"},[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Edit District",-1)),e("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},[...t[35]||(t[35]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Pe,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Region",-1)),b(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.region_id=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},[...t[37]||(t[37]=[e("option",{value:""},"Select a region...",-1)])],512),[[I,l.value.region_id]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"District Name",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.name=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[h,l.value.name]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Code",-1)),b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.code=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"},null,512),[[h,l.value.code]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),b(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.description=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",rows:"3"},null,512),[[h,l.value.description]])])]),e("div",{class:"flex gap-3 border-t border-gray-200 px-6 py-4"},[e("button",{onClick:d,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"}," Cancel "),t[42]||(t[42]=e("button",{class:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors"}," Update District ",-1))])])])):u("",!0)]),_:1})]),_:1})],64))}};export{Oe as default};
