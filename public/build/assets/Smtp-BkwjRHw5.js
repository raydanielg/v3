import{f as M,g as n,c as g,a as y,u as P,h as V,w as h,i as E,e as f,b as s,o as u,j as U,d as c,k as r,l as a,v as C,F,m as w}from"./app-DlV9HYEa.js";import{_ as B}from"./DashboardLayout-BMG-KyuB.js";import{_ as N}from"./Toast-D1CVE4n_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},H={class:"grid gap-4 md:grid-cols-3"},$={class:"md:col-span-2"},q={class:"grid gap-4 md:grid-cols-3 mt-4"},z={class:"md:col-span-2"},A={class:"mt-4"},L={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},D={class:"grid gap-4 md:grid-cols-2"},O={class:"rounded-lg border border-blue-200 bg-blue-50 p-6 shadow-sm"},R={class:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center"},G={class:"flex-1"},I=["disabled"],J={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},K={class:"flex justify-end"},Q=["disabled"],W={key:0,class:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},se={__name:"Smtp",props:{settings:{type:Object,required:!0}},setup(_){const S=_,{settings:o}=M(S),t=n({smtp_host:o.value.smtp_host||"",smtp_port:o.value.smtp_port||"",smtp_username:o.value.smtp_username||"",smtp_password:o.value.smtp_password||"",smtp_encryption:o.value.smtp_encryption||"tls",smtp_from_email:o.value.smtp_from_email||"",smtp_from_name:o.value.smtp_from_name||o.value.site_name||"Emas",test_email:""}),m=n(!1),d=n(!1),b=n(""),v=n("success"),p=n(!1),i=(x,e="success")=>{b.value=x,v.value=e,p.value=!0},k=()=>{m.value=!0,w.patch(route("admin.settings.smtp.update"),t.value,{preserveScroll:!0,onSuccess:()=>{i("SMTP settings updated successfully.","success")},onError:()=>{i("Failed to update SMTP settings.","error")},onFinish:()=>{m.value=!1}})},T=()=>{if(!t.value.test_email){i("Please enter a test email address.","warning");return}d.value=!0,w.post(route("admin.settings.smtp.test"),{test_email:t.value.test_email},{preserveScroll:!0,onSuccess:()=>{i("Test email sent successfully.","success")},onError:()=>{i("Failed to send test email.","error")},onFinish:()=>{d.value=!1}})};return(x,e)=>(u(),g(F,null,[y(P(V),{title:"SMTP Settings"}),y(B,null,{default:h(()=>[p.value?(u(),E(N,{key:0,message:b.value,type:v.value,duration:4e3,onClose:e[0]||(e[0]=l=>p.value=!1)},null,8,["message","type"])):f("",!0),e[27]||(e[27]=s("div",{class:"mb-8 flex items-center justify-between"},[s("div",null,[s("h1",{class:"text-3xl font-bold text-gray-900"},"SMTP Settings"),s("p",{class:"text-gray-600 mt-2 text-sm"},"Configure email server for sending system notifications and test emails.")])],-1)),s("form",{onSubmit:U(k,["prevent"]),class:"space-y-6"},[s("section",j,[e[16]||(e[16]=s("h2",{class:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2"},[s("span",{class:"material-icons text-blue-500 text-base"},"alternate_email"),c(" SMTP Server ")],-1)),s("div",H,[s("div",$,[e[9]||(e[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SMTP Host",-1)),r(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.smtp_host=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., smtp.gmail.com"},null,512),[[a,t.value.smtp_host]])]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SMTP Port",-1)),r(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.smtp_port=l),type:"number",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., 587"},null,512),[[a,t.value.smtp_port]])])]),s("div",q,[s("div",null,[e[12]||(e[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Encryption",-1)),r(s("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.smtp_encryption=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm"},[...e[11]||(e[11]=[s("option",{value:""},"None",-1),s("option",{value:"tls"},"TLS",-1),s("option",{value:"ssl"},"SSL",-1)])],512),[[C,t.value.smtp_encryption]])]),s("div",z,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SMTP Username",-1)),r(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.smtp_username=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., user@example.com"},null,512),[[a,t.value.smtp_username]])])]),s("div",A,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"SMTP Password",-1)),r(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.smtp_password=l),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"••••••••"},null,512),[[a,t.value.smtp_password]]),e[15]||(e[15]=s("p",{class:"mt-1 text-xs text-gray-500"},"Make sure to also configure these values in your environment (e.g., .env) for production.",-1))])]),s("section",L,[e[19]||(e[19]=s("h2",{class:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2"},[s("span",{class:"material-icons text-emerald-500 text-base"},"mail_outline"),c(" From Address ")],-1)),s("div",D,[s("div",null,[e[17]||(e[17]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From Email",-1)),r(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.smtp_from_email=l),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., no-reply@example.com"},null,512),[[a,t.value.smtp_from_email]])]),s("div",null,[e[18]||(e[18]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From Name",-1)),r(s("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.smtp_from_name=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., Emas System"},null,512),[[a,t.value.smtp_from_name]])])])]),s("section",O,[e[23]||(e[23]=s("h2",{class:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2"},[s("span",{class:"material-icons text-blue-500 text-base"},"send"),c(" Send Test Email ")],-1)),s("div",R,[s("div",G,[e[20]||(e[20]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Test Email Address",-1)),r(s("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.test_email=l),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"e.g., you@example.com"},null,512),[[a,t.value.test_email]])]),s("button",{type:"button",onClick:T,disabled:d.value,class:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg shadow-sm transition-colors disabled:opacity-60 disabled:cursor-not-allowed mt-2 sm:mt-6"},[d.value?(u(),g("svg",J,[...e[21]||(e[21]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):f("",!0),e[22]||(e[22]=s("span",null,"Send Test",-1))],8,I)]),e[24]||(e[24]=s("p",{class:"mt-2 text-xs text-gray-500"},"Use this to quickly verify that your SMTP configuration is working.",-1))]),s("div",K,[s("button",{type:"submit",disabled:m.value,class:"inline-flex items-center gap-2 px-5 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-lg shadow-sm transition-colors disabled:opacity-60 disabled:cursor-not-allowed"},[m.value?(u(),g("svg",W,[...e[25]||(e[25]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):f("",!0),e[26]||(e[26]=s("span",null,"Save SMTP Settings",-1))],8,Q)])],32)]),_:1})],64))}};export{se as default};
